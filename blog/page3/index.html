<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Felix Krause
    
  </title>
  
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="alternate" type="application/rss+xml" title="Felix Krause" href="/feed.xml">
  
    <script>
  // Google Analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18658848-6', 'auto');
  ga('set', 'anonymizeIp', true)
  ga('send', 'pageview');
</script>

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    <a class="site-title" href="/">Felix Krause</a>
  
    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <div class="trigger">
        <a href="/" class="page-link active">Blog</a>
        <a href="/privacy" class="page-link ">Privacy</a>
        <a href="/archive" class="page-link ">Archive</a>
        <a href="/about" class="page-link ">About</a>
      </div>
    </nav>
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div id="sidebar">
  <h1 style="font-size: 21px;">Felix Krause</h1>
  <p>Founder of <a href="https://fastlane.tools" target="_blank">fastlane.tools</a></p>
  <p><a href="/about">More about me</a></p>
  <img src="/assets/FelixKrause.jpeg" width="180" />

  <!-- Social links -->
  <ul class="social-media-list" style="margin-top: 20px; margin-bottom: 30px;">
    <li>
      <a href="https://github.com/KrauseFx" target="_blank"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">KrauseFx</span></a>

    </li>
    <li>
      <a href="https://twitter.com/KrauseFx" target="_blank"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">KrauseFx</span></a>

    </li>
    <li>
      <a href="https://www.linkedin.com/in/KrauseFx"><span class="icon icon--linked"><svg width="16px" height="16px" viewBox="0 0 430.117 430.117" xml:space="preserve"><path id="LinkedIn" fill="#828282" d="M430.117,261.543V420.56h-92.188V272.193c0-37.271-13.334-62.707-46.703-62.707 c-25.473,0-40.632,17.142-47.301,33.724c-2.432,5.928-3.058,14.179-3.058,22.477V420.56h-92.219c0,0,1.242-251.285,0-277.32h92.21 v39.309c-0.187,0.294-0.43,0.611-0.606,0.896h0.606v-0.896c12.251-18.869,34.13-45.824,83.102-45.824 C384.633,136.724,430.117,176.361,430.117,261.543z M52.183,9.558C20.635,9.558,0,30.251,0,57.463 c0,26.619,20.038,47.94,50.959,47.94h0.616c32.159,0,52.159-21.317,52.159-47.94C103.128,30.251,83.734,9.558,52.183,9.558z M5.477,420.56h92.184v-277.32H5.477V420.56z"/></svg>
</span><span class="username">KrauseFx</span></a>

    </li>
  </ul>

  <hr />

  <a href="https://whereisfelix.today" target="_blank">
    ‚úàÔ∏è WhereIsFelix.today
  </a>

  <hr />

  <p class="subscribe-newsletter">
  Want to be the first to hear about more privacy and mobile related essays?
</p>

<form class="subscribe-form" action="https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb&amp;id=d9610c8987" method="post" target="popupwindow" onsubmit="window.open('https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb', 'popupwindow', 'scrollbars=yes,width=600,height=620');return true">
  <label for="tlemail"></label>
  <input type="text" placeholder="Email Address" name="EMAIL" id="tlemail">
  <input type="hidden" value="1" name="embed">
  <button type="submit" name="subscribe">
    Subscribe
  </button>
</form>


  <hr />

  <div class='jekyll-twitter-plugin'><a class="twitter-timeline" data-width="500" data-tweet-limit="5" href="https://twitter.com/KrauseFx?ref_src=twsrc%5Etfw">Tweets by KrauseFx</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>

</div>


        <div class="home">
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/introducing-major-key-easily-jot-down-quick-notes">Introducing Major Key - Easily jot down quick notes</a></h1>
        <p class="post-meta">
          <time datetime="2017-11-26T00:00:00+00:00" itemprop="datePublished">
            
            Nov 26, 2017
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <p><img src="/assets/posts/MajorKey.png" width="300" align="right" id="majorkeyscreenshot" /></p>

<p>How often are you on the run, or hanging out with friends, only to suddenly think of this really important thing you need to do when you‚Äôre back home or back at work?</p>

<p>You want to jot down that thought as quickly as possible so you don‚Äôt forget, and you want to be reminded whenever you‚Äôre back on your computer.</p>

<h2 id="introducing-major-key-the-best-key">Introducing Major Key, the best key</h2>

<p>With far less than 100 lines of Swift code, this simple app does all you need:</p>

<ul>
  <li>Unlock phone</li>
  <li>Launch Major Key üîë</li>
  <li>Type the note</li>
  <li>Confirm</li>
</ul>

<p>Within a second you‚Äôll have the note in your email inbox. Extremely useful if you follow the inbox zero approach. All with no waiting times or animations.</p>

<p>Launch the app, write down a note, hit the üîë button and immediately have the note in your inbox.</p>

<div class="video" style="float: left; margin-right: 40px">
  <figure>
    <iframe width="193" height="418" src="//www.youtube.com/embed/dOm5H5a8fbY" frameborder="0" allowfullscreen=""></iframe>
  </figure>
</div>

<h2 id="why-a-new-app">Why a new app?</h2>

<ul>
  <li>Using any kind of <strong>Notes app</strong> works rather nicely, however involves overhead, and chances are you forget on checking the notes app when you‚Äôre back on your Mac.</li>
  <li>Sending yourself an <strong>email</strong> with any email client involves extra work, as you need to start typing your email, and you get to see your inbox (<a href="https://techcrunch.com/2014/12/17/compose-is-a-distraction-free-email-app-that-only-lets-you-write-messages/">similar idea</a>)</li>
  <li>The <strong>IFTTT Notes app</strong> was perfect, however it was discontinued, and the <strong>new IFTTT</strong> app causes problems on the iPhone X due to abusing Web Clips to make it work.</li>
</ul>

<p>üîë Major Key is not available in the App Store, but is open source, and super easy to install if you‚Äôre a developer. If interest is there, I could also publish the app to the store.</p>

<p><br />
<br />
<br /></p>

<h3 style="text-align: center; font-size: 40px; margin-top: 40px; margin-bottom: 20px">
  <a href="https://github.com/KrauseFx/majorkey" target="_blank" style="text-decoration: underline;">
    Open on GitHub
  </a>
</h3>

<style type="text/css">
  @media screen and (max-width: 600px) {
    #majorkeyscreenshot {
      width: 100%;
    }
  }
</style>



        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: notes, ifttt &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2017-11-26-introducing-major-key-easily-jot-down-quick-notes.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/ios-privacy-watchuser-access-both-iphone-cameras-any-time-your-app-is-running">iOS Privacy: watch.user - Access both iPhone cameras any time your app is running</a></h1>
        <p class="post-meta">
          <time datetime="2017-10-25T00:00:00+00:00" itemprop="datePublished">
            
            Oct 25, 2017
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <h1 id="facts">Facts</h1>

<p>Once you grant an app access to your camera, it can</p>

<ul>
  <li>access both the front and the back camera</li>
  <li>record you at any time the app is in the foreground</li>
  <li>take pictures and videos without telling you</li>
  <li>upload the pictures/videos it takes immediately</li>
  <li>run real-time face recognition to detect facial features or expressions</li>
</ul>

<p>Have you ever used a social media app while using the bathroom? üöΩ</p>

<p>All without indicating that your phone is recording you and your surrounding, no LEDs, no light or any other kind of indication.</p>

<h2 id="disclaimer">Disclaimer</h2>

<p>This project is a proof of concept and should not be used in production. The goal is to highlight a privacy loophole that can be abused by iOS apps.</p>

<h2 id="what-can-an-ios-app-do">What can an iOS app do?</h2>

<p>iOS users often grant camera access to an app soon after they download it (e.g. to add an avatar or send a photo). These apps, like a messaging app or any news-feed-based app, can easily track the users face, take pictures, or live stream the front and back camera, without the user‚Äôs consent.</p>

<ul>
  <li>Get full access to the front and back camera of an iPhone/iPad any time your app is running in the foreground</li>
  <li>Use the front and the back camera to know what your user is doing right now and where the user is located based on image data</li>
  <li>Upload random frames of the video stream to your web service, and run a proper face recognition software, which enables you to
    <ul>
      <li>Find existing photos of the person on the internet</li>
      <li>Learn how the user looks like and create a 3d model of the user‚Äôs face</li>
    </ul>
  </li>
  <li>Live stream their camera onto the internet (e.g. while they sit on the toilet), with the recent innovation around faster internet connections, faster processors and more efficient video codecs it‚Äôs hard to detect for the average user</li>
  <li>Estimate the mood of the user based on what you show in your app (e.g. news feed of your app)</li>
  <li>Detect if the user is on their phone alone, or watching together with a second person</li>
  <li>Recording stunning video material from bathrooms around the world, using both the front and the back camera, while the user scrolls through a social feed or plays a game</li>
  <li>Using the new built-in iOS 11 Vision framework, every developer can very easily parse facial features in real-time like the eyes, mouth, and the face frame</li>
</ul>

<h2 id="how-can-i-protect-myself-as-a-user">How can I protect myself as a user?</h2>

<p>There are only a few things you can do:</p>

<ul>
  <li>The only real safe way to protect yourself is using camera covers: There is many different covers available, find one that looks nice for you, or use a sticky note (<a href="https://www.amazon.com/Original-Webcam-Cover-directly-Manufacturer/dp/B01LWS2X8I">for example</a>).</li>
  <li>You can revoke camera access for all apps, always use the built-in camera app, and use the image picker of each app to select the photo (which will cause you to run into a problem I described with <a href="https://github.com/krausefx/detect.location">detect.location</a>).</li>
  <li>To avoid this as well, the best way is to use Copy &amp; Paste to paste the screenshot into your messaging application. If an app has no copy &amp; paste support, you‚Äôll have to either expose your image library, or your camera.</li>
</ul>

<p>It‚Äôs interesting that many people cover their camera, <a href="https://www.nytimes.com/2016/06/23/technology/personaltech/mark-zuckerberg-covers-his-laptop-camera-you-should-consider-it-too.html">including Mark Zuckerberg</a>.</p>

<h2 id="proposal">Proposal</h2>

<p>How can the root of the problem be fixed, so we don‚Äôt have to use camera covers?</p>

<ul>
  <li>Offer a way to grant temporary access to the camera (e.g. to take and share one picture with a friend on a messaging app), related to <a href="https://github.com/krausefx/detect.location">detect.location</a>.</li>
  <li>Show an icon in the status bar that the camera is active, and force the status bar to be visible whenever an app accesses the camera</li>
  <li>Add an LED to the iPhone‚Äôs camera (both sides) that can‚Äôt be worked around by sandboxed apps, which is the elegant solution that the MacBook uses</li>
</ul>

<p>I reported the issue to Apple with <a href="https://openradar.appspot.com/radar?id=5007947352506368">rdar://35116272</a>.</p>

<div class="video" style="width: 250px; float: right;margin: 20px">
  <figure>
    <iframe width="240" height="400" src="//www.youtube.com/embed/GqWUaflPMh0" frameborder="0" allowfullscreen=""></iframe>
  </figure>
</div>

<h2 id="about-the-demo">About the demo</h2>

<p>I didn‚Äôt submit the demo to the App Store; however, you can very easily <a href="https://github.com/KrauseFx/watch.user">clone the repo</a> and run it on your own device.</p>

<ul>
  <li>You first have to take a picture that gets ‚Äúposted‚Äù on the fake ‚Äúsocial network‚Äù in the app
    <ul>
      <li>At this point, you‚Äôve granted full access to both of your cameras every time the app is running</li>
    </ul>
  </li>
  <li>You browse through a news feed</li>
  <li>After a bit of scrolling, you‚Äôll suddenly see pictures of yourself, taken a few seconds ago while you scrolled through the feed</li>
  <li>You realize you‚Äôve been recorded the whole time, and with it, the app ran a face recognition algorithm to detect facial features.</li>
</ul>

<p>You might say</p>

<blockquote>
  <p>Oh, obviously, I never grant camera permissions!</p>
</blockquote>

<p><img src="/assets/posts/watch-user-screenshot.jpg" style="width: 250px; float: right; border: 2px solid #BBB; margin: 10px" /></p>

<p>However, if you‚Äôre using a messaging service, like Messenger, WhatsApp, Telegram or anything else, chances are high you already granted permission to access both your image library (see <a href="https://github.com/KrauseFx/detect.location">detect.location</a>) and your camera. You can check which apps have access to your cameras and photo library by going to Settings &gt; Privacy.</p>

<p>The full source code is available <a href="https://github.com/KrauseFx/watch.user">on GitHub</a>.</p>

<h3 id="how-does-the-demo-app-get-access-to-the-camera">How does the demo app get access to the camera?</h3>

<p>Once you take and post one picture or video via a social network app, you grant full access to the camera, and any time the app is running, the app can use the camera.</p>

<h3 id="whats-the-screenshot-on-the-right">What‚Äôs the screenshot on the right</h3>

<p>As part of iOS 11, there is now an easy to use Vision framework, that allows developers to easily track faces. The screenshot shows that it‚Äôs possible to get some basic emotions right, so I wrote a very basic mapping of a user‚Äôs face to the corresponding emoji as a proof of concept. You can see the highlighted facial features, and the detected emoji at the bottom.</p>

<h2 id="similar-projects-ive-worked-on">Similar projects I‚Äôve worked on¬†</h2>

<p>I published more posts on how to access the camera, the user‚Äôs location data, their Mac screen and their iCloud password, check out <a href="/privacy">krausefx.com/privacy</a> for more.</p>

<hr />

<p>Special thanks to <a href="https://twitter.com/khanlou">Soroush</a>, who came up with the initial idea for this write-up.</p>

<h3 style="text-align: center; font-size: 40px; margin-top: 40px">
  <a href="https://github.com/KrauseFx/watch.user" target="_blank" style="text-decoration: underline;">
    Open on GitHub
  </a>
</h3>


        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: ios, privacy, phishing, camera, video &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2017-10-25-ios-privacy-watchuser-access-both-iphone-cameras-any-time-your-app-is-running.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/ios-privacy-stealpassword-easily-get-the-users-apple-id-password-just-by-asking">iOS Privacy: steal.password - Easily get the user&#39;s Apple ID password, just by asking</a></h1>
        <p class="post-meta">
          <time datetime="2017-10-10T00:00:00+00:00" itemprop="datePublished">
            
            Oct 10, 2017
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <p>Do you want the user‚Äôs Apple ID password, to get access to their Apple account, or to try the same email/password combination on different web services? Just ask your users politely, they‚Äôll probably just hand over their credentials, as they‚Äôre trained to do so üëå</p>

<p><img src="/squarespace_images/static_545299aae4b0e9514fe30c95_54529a29e4b025a90f45cc50_59dc97a83e00bed1b42c0096_1507631710330__img.png_" alt="" /></p>

<p><img src="/squarespace_images/static_545299aae4b0e9514fe30c95_54529a29e4b025a90f45cc50_59dca223197aeaa9a5932f2e_1507631701259__img.png_" alt="" /></p>

<h2 id="disclaimer">Disclaimer</h2>

<p>This is just a proof of concept, phishing attacks are illegal! Don‚Äôt use this in any of your apps. The goal of this blog post is to close the loophole that has been there for many years, and hasn‚Äôt been addressed yet. For moral reasons, I decided not to include the actual source code of the popup, however it was shockingly easy to replicate the system dialog.</p>

<h2 id="why-does-this-work">Why does this work?</h2>

<p>iOS asks the user for their iTunes password for many reasons, the most common ones are recently installed iOS operating system updates, or iOS apps that are stuck during installation.</p>

<p>As a result, users are trained to just enter their Apple ID password whenever iOS prompts you to do so. However, those popups are not only shown on the lock screen, and the home screen, but also inside random apps, e.g. when they want to access iCloud, GameCenter or In-App-Purchases.</p>

<p>This could easily be abused by any app, just by showing an UIAlertController, that looks exactly like the system dialog.</p>

<p>Even users who know a lot about technology have a hard time detecting that those alerts are phishing attacks.</p>

<h2 id="how-can-you-protect-yourself">How can you protect yourself</h2>

<ul>
  <li>Hit the home button, and see if the app quits:
    <ul>
      <li>If it closes the app, and with it the dialog, then this was a phishing attack</li>
      <li>If the dialog and the app are still visible, then it‚Äôs a system dialog. The reason for that is that the system dialogs run on a different process, and not as part of any iOS app.</li>
    </ul>
  </li>
  <li>Don‚Äôt enter your credentials into a popup, instead, dismiss it, and open the Settings app manually. This is the same concept, like you should never click on links on emails, but instead open the website manually</li>
  <li>If you hit the Cancel button on a dialog, the app still gets access to the content of the password field. Even after entering the first characters, the app probably already has your password.</li>
</ul>

<p>Initially I thought, faking those alerts requires the app developer to know your email. Turns out, some of those auth popups don‚Äôt include the email address, making it even easier for phishing apps to ask for the password.</p>

<p><img src="/squarespace_images/static_545299aae4b0e9514fe30c95_54529a29e4b025a90f45cc50_59dca2accf81e0c47e1e7144_1507631811313__img.png_" alt="" /></p>

<h2 id="proposal">Proposal</h2>

<p>Modern web browsers already do an excellent job protecting users from phishing attacks. Phishing within mobile apps is a rather new concept, and therefore still pretty unexplored.</p>

<ul>
  <li>When asking for the Apple ID from the user, instead of asking for the password directly, ask them to open the settings app</li>
  <li>Fix the root of the problem, users shouldn‚Äôt constantly be asked for their credentials. It doesn‚Äôt affect all users, but I myself had this issue for many months, until it randomly disappeared.</li>
  <li>Dialogs from apps could contain the app icon on the top right of the dialog, to indicate an app is asking you, and not the system. This approach is used by push notifications also, this way, an app can‚Äôt just send push notifications as the iTunes app.</li>
</ul>

<p><img src="/squarespace_images/static_545299aae4b0e9514fe30c95_54529a29e4b025a90f45cc50_59dca405c534a5f23644c180_1507632212491__img.jpg_" align="right" width="250" class="inline-img" /></p>

<p>I‚Äôve reported this as a radar, which you can dupe:¬†<a href="https://openradar.appspot.com/radar?id=4952345645416448">rdar://34885659</a>¬†üëç</p>

<p>Sometimes iOS shows the following notification on the lock screen, which opens up the iCloud Settings screen, this is a much better approach than to ask for the password directly:¬†</p>

<h2 id="complexity">Complexity</h2>

<p>Showing a dialog that looks just like a system popup is super easy, there is no magic or secret code involved, it‚Äôs literally the examples provided in the Apple docs, with a custom text.</p>

<p>I decided not to open source the actual popup code, however, note that it‚Äôs less than 30 lines of code and every iOS engineer will be able to quickly build their own phishing code.</p>

<h2 id="qa">Q&amp;A</h2>

<p>Imagine if everybody read this before posting a comment on HackerNews/Reddit #oneCanDream :)</p>

<h3 id="but-i-have-2-factor-enabled-im-safe-right">But, I have 2-factor enabled, I‚Äôm safe, right?</h3>

<p>Good for you, everybody should use 2-step verification obviously, however many people don‚Äôt. At the same time, even if your Apple account is 2FA protected, many users still use the same username/password combination on most web services, meaning if hackers know your Apple ID password, chances are high, they‚Äôre gonna try the same combination on other common services.</p>

<p>Also, even with 2FA enabled accounts, what if the app asked you for your 2 step code? Most users would gladly request a 2FA-token and ask for it, and directly pipe it over to a remote server.</p>

<h3 id="apple-would-never-accept-such-an-app-right">Apple would never accept such an app, right?</h3>

<p>Apple is doing a great job protecting users from dangerous third party apps, that‚Äôs why the App Store is built and provided like it is, that‚Äôs why we code sign our application (
<a href="https://krausefx.com/blog/the-developer-part-of-ios-code-signing-doesnt-add-any-security-to-anything">not really, but kind of</a>).</p>

<p>However, it‚Äôs rather easy to run certain code only after the app is approved, those are not new ideas, but just to give you some ideas:</p>

<ul>
  <li>Use remote code (which is not allowed by itself, except for JavaScript), React Native or a custom JS bridge is your friend</li>
  <li>Use the iTunes search API to compare the current version number with the App Store version number (<a href="https://itunes.apple.com/lookup?bundleId=com.Facebook.Facebook">example request</a>), this way the app can automatically enable malicious code after it got approved.</li>
  <li>Use a remote configuration tool to enable a feature only after an app is approved by Apple</li>
  <li>Use a time-based trigger: just skip running certain code for the first week after submitting the binary, meaning the code will only run once the app is either approved or rejected.</li>
  <li><a href="https://www.theverge.com/2017/4/23/15399438/apple-uber-app-store-fingerprint-program-tim-cook-travis-kalanick">Pull an Uber and don‚Äôt run certain code when the location is near Cupertino</a>¬†(it‚Äôs probably fixed by Apple by now)</li>
</ul>

<p>The things above is public knowledge, most iOS developers are aware, and I strongly advise against using any of this, Apple will eventually catch you and block your account.</p>

<p>The point of this list is: While the review process provides a basic safety filter, organisations with bad intent will always find a way to somehow work around the limitations of a platform.</p>

<h3 id="phishing-on-mobile-is-that-a-thing-now">Phishing on mobile? Is that a thing now?</h3>

<p>This area will become more and more relevant, with users being uninformed, and the mobile operating systems not yet clearly separating system UI and app UI. This is kind of related to 
<a href="https://github.com/KrauseFx/detect.location">detect.location</a>, where apps would write their own, custom image picker to provide a better ‚Äúexperience‚Äù, but in reality, with that, they also get full access to your image library, and optionally also your camera (related to 
<a href="https://github.com/KrauseFx/watch.user">watch.user</a>).</p>

<p>iOS should very clearly distinguish between system UI and app UI elements, so that ideally it‚Äôs even obvious for the average smartphone user that something seems off. This is a tricky problem to solve, and web browser are still tackling it, you still have websites that make popups look like macOS / iOS popups, so that many users think it‚Äôs a system message.</p>

<p><img src="/squarespace_images/static_545299aae4b0e9514fe30c95_54529a29e4b025a90f45cc50_59dca2ebf14aa1f26de959f6_1507631870942__img.jpg_" align="right" width="250" class="inline-img" /></p>

<h3 id="but-but-but-why-is-the-symbol-within-the--is-this-all-fake">But, but, but, why is the .¬†symbol within the ‚Äú, is this all fake?</h3>

<p>Nope, actually, that‚Äôs how the system dialog looks like, the .¬†is within the ‚Äústring notation, so I designed the phishing dialog to also include the same style.</p>

<h2 id="similar-projects-ive-worked-on">Similar projects I‚Äôve worked on¬†</h2>

<p>I published more posts on how to access the camera, the user‚Äôs location data, their Mac screen and their iCloud password, check out <a href="/privacy">krausefx.com/privacy</a> for more.</p>

<h3 style="text-align: center; font-size: 40px;">
  <a href="https://github.com/KrauseFx/steal.password" target="_blank" style="text-decoration: underline;">
    Open on GitHub
  </a>
</h3>



        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: ios, privacy, phishing, login, credentials &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2017-10-10-ios-privacy-stealpassword-easily-get-the-users-apple-id-password-just-by-asking.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/ios-privacy-detectlocation-an-easy-way-to-access-the-users-ios-location-data-without-actually-having-access">iOS Privacy: detect.location - An easy way to access the user&#39;s iOS location data without actually having access</a></h1>
        <p class="post-meta">
          <time datetime="2017-10-09T00:00:00+00:00" itemprop="datePublished">
            
            Oct 9, 2017
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <p>Does your iOS app have access to the user‚Äôs image library? Do you want to know your user‚Äôs movements over the last several years, including what cities they‚Äôve visited, which iPhones they‚Äôve owned and how they travel? Do you want all of that data in less a second? Then this project is for you!</p>

<p><img src="/squarespace_images/static_545299aae4b0e9514fe30c95_54529a29e4b025a90f45cc50_59db4461cf81e005db7a2062_1507542261614_Screenshot+2017-10-09+11.40.41.png.41.png_" alt="" /></p>

<p><img src="/squarespace_images/static_545299aae4b0e9514fe30c95_54529a29e4b025a90f45cc50_59db44b8f09ca452b53663ab_1507542252323_Screenshot+2017-10-09+11.40.48.png.48.png_" alt="" /></p>

<p>To see all the above with <strong>your</strong>¬†data, download the <a href="https://itunes.apple.com/us/app/detectlocations/id1288532777?ls=1&amp;mt=8">DetectLocations app</a>¬†from the App Store.</p>

<h2 id="what-can-you-do-with-detectlocation">What can you do with detect.location?</h2>

<ul>
  <li>Get a history of the cities, countries, and other places a user has visited, as long as they took a picture there</li>
  <li>Find the user‚Äôs place of work, by figuring out where they are from 9 to 5</li>
  <li>Get a complete list of the user‚Äôs cameras and photography devices (which iPhones, Android phones, cameras) and how long they used each device</li>
  <li>Use facial recognization to find out who the user hangs out with and who their partner is. Is the user single?</li>
  <li>Understand the user‚Äôs background:
    <ul>
      <li>Did the user attend college? If so, which one?</li>
      <li>Did the user recently move from the suburbs to the city?</li>
      <li>Does the user spend a lot of time with their family?</li>
    </ul>
  </li>
</ul>

<h2 id="whats-detectlocation">What‚Äôs detect.location?</h2>

<ul>
  <li>The native image picker built into iOS allows app developers to access the <strong>full</strong>¬†image library, with all its metadata</li>
  <li>With the raw PHAsset object, which represents a picture or video, you also get access to the image‚Äôs metadata. This includes the location and even the speed at which the user was traveling when the picture was taken.</li>
  <li>In particular, an app can get the following data:</li>
  <li>The exact location of each asset</li>
  <li>The physical speed in which the picture/video was taken (how fast did the camera move)</li>
  <li>The camera model</li>
  <li>The exact date + time</li>
  <li>Other exif image metadata</li>
  <li>With this information, you can render a route of the user‚Äôs travels, into the past for as long as they‚Äôve had a GPS-enabled camera (like an iPhone, other smartphone, or modern point-and-shoot)</li>
  <li>You can access all of this metadata without analyzing the 
contents¬†of the image at all</li>
</ul>

<p>For more information about the proposal on how this could be fixed, how the code works and more, check out the GitHub link below.</p>

<h3 style="text-align: center; font-size: 40px;">
  <a href="https://github.com/krausefx/detect.location" target="_blank" style="text-decoration: underline;">
    Open on GitHub
  </a>
</h3>

<p><br /></p>

<h2 id="similar-projects-ive-worked-on">Similar projects I‚Äôve worked on¬†</h2>

<p>I published more posts on how to access the camera, the user‚Äôs location data, their Mac screen and their iCloud password, check out <a href="/privacy">krausefx.com/privacy</a> for more.</p>


        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: ios, privacy, location, images, library &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2017-10-09-ios-privacy-detectlocation-an-easy-way-to-access-the-users-ios-location-data-without-actually-having-access.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  

  <!-- Pagination links -->
  <div class="pagination">
    
      <a href="/blog/page2/" class="previous">Newer</a>
    
    /
    
      <a href="/blog/page4/" class="next">Older</a>
    
  </div>

</div>

      </div>
    </main>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          <li>
            <a href="https://github.com/KrauseFx" target="_blank"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">KrauseFx</span></a>

          </li>
          <li>
            <a href="https://twitter.com/KrauseFx" target="_blank"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">KrauseFx</span></a>

          </li>
        </ul>
      </div>
      <div class="footer-col footer-col-2"></div>
      <div class="footer-col footer-col-3">
        <p class="subscribe-newsletter">
  Want to be the first to hear about more privacy and mobile related essays?
</p>

<form class="subscribe-form" action="https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb&amp;id=d9610c8987" method="post" target="popupwindow" onsubmit="window.open('https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb', 'popupwindow', 'scrollbars=yes,width=600,height=620');return true">
  <label for="tlemail"></label>
  <input type="text" placeholder="Email Address" name="EMAIL" id="tlemail">
  <input type="hidden" value="1" name="embed">
  <button type="submit" name="subscribe">
    Subscribe
  </button>
</form>

      </div>
    </div>

  </div>
</footer>

<script type="text/javascript">
  var links = document.links;
  for (var i = 0, linksLength = links.length; i < linksLength; i++) {
    if (links[i].hostname != window.location.hostname) {
      links[i].target = '_blank';
    } 
  }
</script>


  </body>

</html>
